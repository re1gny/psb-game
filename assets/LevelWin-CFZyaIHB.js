import{j as t,m as o,r as m,A as u,a as b}from"./main-BsAAu-OD.js";import{P as g}from"./Path-CNiTwU-A.js";import{C as j,A as y}from"./Rules-mstwsWBF.js";import{a8 as w}from"./overlay-Bi5zkGz3.js";import{A as L}from"./levels-CFuYkz4O.js";import{u as N}from"./useStep-CYArSX1s.js";import{n as k}from"./new-overlay-CDxfH-6h.js";import{B as O}from"./Button-tKMwCU5X.js";import{q as R}from"./overlay-loose-DFfchb7h.js";const x={0:{initialX:-40,initialY:162,initialRotate:-10,x:12,y:162,z:1,rotate:-5,origin:"top left"},1:{initialX:200,initialY:195.51,initialRotate:10,x:154.85,y:195.51,z:2,rotate:5,origin:"bottom left"}},v=r=>{const{className:i,cards:a,...c}=r;return t.jsxs(o.div,{className:`absolute top-0 left-0 w-full h-full z-30 ${i??""}`,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.4}},...c,children:[t.jsx(o.img,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute top-0 left-0 w-full h-full",src:w,alt:""}),t.jsxs(o.svg,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,transition:{duration:.5,ease:"linear"}},transition:{duration:.3,ease:"easeInOut"},className:"absolute left-[55.5px] top-[22px]",width:"273",height:"587",viewBox:"0 0 273 587",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M271.5 65L179.5 159L240.5 32L271.5 65Z",fill:"#EA5616"}),t.jsx("path",{d:"M197 78.5L159.5 166L173 70.5L197 78.5Z",fill:"#EA5616"}),t.jsx("path",{d:"M146.5 2L153.5 144.5L106.5 6.5L146.5 2Z",fill:"#EA5616"}),t.jsx("path",{d:"M5 539L87.5 457.5L36 584.5L5 539Z",fill:"#EA5616"}),t.jsx("path",{d:"M115 542.5L94.5 473L84 556.5L115 542.5Z",fill:"#EA5616"}),t.jsx("path",{d:"M1.5 469.5L71.5 453.5L1.5 495V469.5Z",fill:"#EA5616"}),t.jsx("path",{d:"M271.5 65L179.5 159L240.5 32L271.5 65Z",stroke:"black",strokeWidth:"2"}),t.jsx("path",{d:"M197 78.5L159.5 166L173 70.5L197 78.5Z",stroke:"black",strokeWidth:"2"}),t.jsx("path",{d:"M146.5 2L153.5 144.5L106.5 6.5L146.5 2Z",stroke:"black",strokeWidth:"2"}),t.jsx("path",{d:"M5 539L87.5 457.5L36 584.5L5 539Z",stroke:"black",strokeWidth:"2"}),t.jsx("path",{d:"M115 542.5L94.5 473L84 556.5L115 542.5Z",stroke:"black",strokeWidth:"2"}),t.jsx("path",{d:"M1.5 469.5L71.5 453.5L1.5 495V469.5Z",stroke:"black",strokeWidth:"2"})]}),a.map((n,e)=>t.jsx(o.div,{className:"absolute top-0 left-0",initial:{x:x[e].initialX,y:x[e].initialY,rotate:x[e].initialRotate},animate:{x:x[e].x,y:x[e].y,rotate:x[e].rotate},exit:{transition:{duration:.5,ease:"linear"}},transition:{duration:.3,ease:"easeInOut"},style:{transformOrigin:x[e].origin},children:t.jsx(j,{height:298.53,width:184.59,character:n})},e))]})},A={0:{initialX:57,initialY:122,initialRotate:0,x:57,y:122,z:1,rotate:0,exitX:-83,exitY:-98,exitRotate:-6}},C={0:{initialX:37.84,initialY:110,initialRotate:-5,x:47.84,y:100,z:1,rotate:-5,exitX:-63,exitY:-73,exitRotate:-6},1:{initialX:97.45,initialY:229.43,initialRotate:5,x:120.45,y:239.43,z:2,rotate:5,exitX:-59,exitY:-60,exitRotate:-6}},F=r=>{const{className:i,cards:a,onFinish:c,onNext:n,...e}=r,[f,h]=m.useState(!1),p=()=>{n==null||n(),h(!0)},s=a.length===2?C:A;return t.jsx(o.div,{className:`absolute top-0 left-0 w-full h-full z-30 ${i??""}`,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.4}},...e,children:t.jsx(u,{onExitComplete:()=>c==null?void 0:c(),children:!f&&t.jsxs(t.Fragment,{children:[t.jsx(o.img,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute top-0 left-0 w-full h-full",src:R,alt:""}),t.jsx(o.img,{initial:{opacity:0,scale:.6,rotate:-25},animate:{opacity:1,scale:1,rotate:0},exit:{opacity:0,transition:{duration:.2,ease:"easeInOut"}},transition:{duration:.4,ease:"easeInOut"},className:"absolute top-[-141px] left-[-178px] w-[730px] h-[948px]",src:k,alt:""}),t.jsx(o.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},className:"flex flex-col items-center absolute top-[26px] left-[20px] w-[calc(100%-40px)]",children:t.jsx(o.div,{className:"relative flex items-center justify-center bg-[#FFFFFF] border-2 border-[#000000] rounded-[7.41px] w-full h-[62px] z-10",children:t.jsx("p",{className:"font-inter font-semibold text-[20px] leading-[105%] tracking-[0.01em] text-[#00029D]",children:a.length===2?"Ты получил новые карты!":"Ты получил новую карту!"})})}),a.map((d,l)=>t.jsx(o.div,{className:"absolute top-0 left-0 rounded-[8.79px] ",initial:{opacity:0,x:s[l].initialX,y:s[l].initialY,rotate:s[l].initialRotate,scale:0,boxShadow:"none"},animate:{opacity:1,x:s[l].x,y:s[l].y,rotate:s[l].rotate,scale:1,boxShadow:"0px 0px 22px 0px #FFFFFF"},exit:{opacity:0,x:s[l].exitX,y:s[l].exitY,rotate:s[l].exitRotate,scale:.05,boxShadow:"none",transition:{duration:.8,ease:"easeInOut",opacity:{delay:.5,duration:.3},rotate:{delay:.3,duration:.5}}},children:t.jsx(j,{height:a.length===2?337.66:422,width:a.length===2?208.78:260.93,character:d})},l)),t.jsx(o.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},className:"flex flex-col items-center absolute bottom-[30px] left-[20px] w-[calc(100%-40px)]",children:t.jsx(O,{className:"absolute",onClick:p,children:"Забрать"})})]})})})};function z({level:r}){const[i,a]=N(`level-${r.id}-win`,0),c=b(),[n,e]=m.useState(!1),f=y.filter(d=>r.correctCharacters.includes(d.id)),h=y.filter(d=>r.winNewCharacters.includes(d.id)),p=r.id===L[L.length-1].id,s=()=>{a(),e(!0)};return m.useEffect(()=>{i===0&&setTimeout(()=>a(),300),i===1&&setTimeout(()=>a(),1600),!p&&i===2&&setTimeout(()=>a(),300),p&&i===2&&setTimeout(()=>c({to:"/final"}),800)},[i]),m.useEffect(()=>{n&&setTimeout(()=>e(!1),200)},[n]),t.jsxs(t.Fragment,{children:[t.jsx(g,{withRules:!1,blur:i===1||i===3,pulse:n}),t.jsx(u,{children:i===1&&t.jsx(v,{cards:f})}),t.jsx(u,{children:(i===3||i===4)&&!p&&t.jsx(F,{cards:h,onFinish:s,onNext:a})})]})}export{z as L};
