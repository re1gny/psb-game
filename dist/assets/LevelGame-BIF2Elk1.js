import{r as h,P as t0,j as e,g as X,A as o,m as a,a as i0}from"./index-Uz-gSZ-6.js";import{u as Z,A as W,L as s0,a as a0,R as l0}from"./Rules-T-DKLZz0.js";import{a8 as J,a7 as n0}from"./overlay-D8PpJAjH.js";import{q as o0}from"./overlay-loose-DTAV0za5.js";import{A as r0}from"./levels-LS2bMXps.js";import{B as H}from"./Button-uD89Pmsp.js";import{e as c0}from"./monster-1-CKYC7YY5.js";import{C as x0,A as p0}from"./monsters-CZmFg8Dk.js";import{u as Q}from"./useStep-D40PSQLG.js";function d0(){const t=h.useContext(t0);return t?t.custom:void 0}const U=304.83,Y=493,h0=t=>{const{style:f,height:s,width:r,monster:c,...n}=t,d=X(r,s,U,Y);return e.jsx("div",{style:{...f,width:`${r}px`,height:`${s}px`,"--scale":d},...n,children:e.jsxs("div",{className:"flex flex-col rounded-[8.79px] border-[1.19px] border-[#FFFFFF] bg-cover pt-[17.58px] pb-[23px] pl-[20px] pr-[20px]",style:{width:`${U}px`,height:`${Y}px`,transform:`scale(${d})`,backgroundImage:`url(${c0})`,transformOrigin:"top left"},children:[e.jsxs("div",{className:"relative w-full h-[208.82px] rounded-[8.79px] border-[1.76px] border-[#FFFFFF] bg-[#000000] pt-[49.82px] overflow-hidden",style:{backgroundImage:`url(${c.backSubBg})`,backgroundPositionY:"49.82px",backgroundSize:"100%"},children:[e.jsx("div",{className:"flex items-center justify-center absolute top-[-1px] left-[-1px] w-[calc(100%+2px)] h-[49.82px] rounded-[8.79px] border-[1.76px] bg-[#000000] px-[14px]",children:e.jsx("h3",{className:"font-gilroy font-extrabold text-[18px] leading-[100%] text-[#FFFFFF] text-center",children:c.name})}),e.jsx("div",{className:"flex items-start justify-center w-full h-full",children:e.jsx("img",{style:{width:`${c.backImageWidth}px`,height:`${c.backImageHeight}px`},src:c.image,alt:""})})]}),e.jsxs("div",{className:"mt-[14px] flex relative w-full flex-grow rounded-[8.79px] border-[1.76px] border-[#000000] py-[12px] pl-[24px] pr-[12px] bg-[#FFFFFF] overflow-hidden",children:[e.jsx("svg",{className:"absolute top-[12px] left-[11px]",width:"5",height:"17",viewBox:"0 0 5 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M0.81932 10.2327L0.137135 4.54784V-6.10352e-05H4.23024V4.54784L3.54806 10.2327H0.81932ZM2.18369 16.2359C1.00124 16.2359 0.0234375 15.2581 0.0234375 14.0757C0.0234375 12.8932 1.00124 11.9154 2.18369 11.9154C3.36614 11.9154 4.34394 12.8932 4.34394 14.0757C4.34394 15.2581 3.36614 16.2359 2.18369 16.2359Z",fill:"black"})}),e.jsx("p",{className:"font-gilroy font-light text-[14px] leading-[115%] text-[#000000]",children:c.details})]})]})})},q=304.83,K=493,L0=t=>{const{className:f,style:s,height:r,width:c,character:n,withCheck:d,checked:m,disabled:y,onCheck:u,highlightCheck:g,...p}=t,N=X(c,r,q,K);return e.jsxs("div",{style:{...s,width:`${c}px`,height:`${r}px`,"--scale":N},className:`relative ${f??""}`,...p,children:[e.jsx(o,{children:g&&e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute top-0 left-0 w-full h-full rounded-[8.79px] bg-[#2C2D84CF] z-20"})}),d&&e.jsx("button",{className:`absolute top-[17px] left-[18px] z-20 w-[52px] h-[52px] flex items-center justify-center rounded-[10px] border-[2px] border-[#000000] cursor-pointer ${y?"bg-[#f0885b] pointer-events-none":"bg-[#EA5616]"}`,style:{boxShadow:g?"0px 0px 8.5px 0px #FFFFFF":"none",transition:"box-shadow 0.2s ease-in-out"},disabled:y,onClick:()=>u(!m),children:e.jsx(o,{children:m&&e.jsx(a.svg,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.1,ease:"easeInOut"},width:"35",height:"26",viewBox:"0 0 35 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M34.6758 4.37695L21.915 17.1367L21.8848 17.1064L13.0547 25.9375L13.0527 25.9355L12.9912 25.999L0.231445 13.2393L4.19141 9.2793L12.9932 18.0781L21.8545 9.2168L21.8828 9.24512L30.7158 0.416016L34.6758 4.37695Z",fill:"white"})})})}),e.jsxs("div",{className:"relative flex flex-col rounded-[8.79px] border-[1.19px] bg-cover pt-[17px] pb-[16px] pl-[18px] pr-[18px]",style:{width:`${q}px`,height:`${K}px`,transform:`scale(${N})`,backgroundImage:`url(${n.baseBg})`,transformOrigin:"top left",borderColor:n.borderColor},children:[e.jsxs("div",{className:"shrink-0 relative w-full h-[208.82px] rounded-[8.79px] border-[1.76px] bg-[#FFFFFF]",style:{backgroundImage:`url(${n.backSubBg})`,backgroundPositionY:"34px",backgroundSize:"100%",borderColor:n.borderColor},children:[e.jsx("div",{className:`flex items-center justify-center absolute z-10 top-[-1px] left-[-1px] w-[calc(100%+2px)] h-[49.82px] rounded-[8.79px] border-[1.76px] bg-[#FFFFFF] pr-[14px] ${d?"pl-[50px]":"pl-[14px]"}`,style:{borderColor:n.borderColor},children:e.jsx("h3",{className:"font-gilroy font-extrabold text-[18px] leading-[100%] text-[#000000] text-center",children:n.name})}),e.jsx("div",{className:"relative flex items-start justify-center w-full h-full overflow-hidden",children:e.jsx("img",{className:"absolute",style:{top:`${n.backImageY}px`,width:`${n.backImageWidth}px`,height:`${n.backImageHeight}px`},src:n.image,alt:""})})]}),e.jsxs("div",{className:"mt-[14px] flex flex-col relative w-full flex-grow rounded-[8.79px] border-[1.76px] py-[8px] pr-[6px] bg-[#FFFFFF] overflow-hidden",style:{borderColor:n.borderColor},children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"shrink-0 flex items-center justify-center w-[32px]",children:n.backSign}),e.jsx("h4",{className:"font-gilroy font-extrabold text-[14px] leading-[100%] text-[#000000]",children:"Сильные стороны"})]}),e.jsx("ul",{className:"mt-1",style:{color:n.borderColor},children:n.pros.map((x,b)=>e.jsxs("li",{className:`flex items-start font-gilroy font-light text-[14px] leading-[115%] text-[#000000] ${b===0?"":"mt-1"}`,children:[e.jsx("div",{className:"shrink-0 flex items-center justify-center w-[32px] h-4",children:e.jsx("svg",{width:"4",height:"4",viewBox:"0 0 4 4",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("circle",{cx:"2",cy:"2",r:"2",fill:n.borderColor})})}),x]},b))}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx("div",{className:"shrink-0 flex items-center justify-center w-[32px]",children:n.backSign}),e.jsx("h4",{className:"font-gilroy font-extrabold text-[14px] leading-[100%] text-[#000000]",children:"Слабости"})]}),e.jsx("ul",{className:"mt-1",style:{color:n.borderColor},children:n.cons.map((x,b)=>e.jsxs("li",{className:`flex items-start font-gilroy font-light text-[14px] leading-[115%] text-[#000000] ${b===0?"":"mt-1"}`,children:[e.jsx("div",{className:"shrink-0 flex items-center justify-center w-[32px] h-4",children:e.jsx("svg",{width:"4",height:"4",viewBox:"0 0 4 4",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("circle",{cx:"2",cy:"2",r:"2",fill:n.borderColor})})}),x]},b))})]})]})]})},G=2,f0=({character:t,disabled:f,checked:s,applied:r,onCheck:c,highlightCheck:n})=>{const d=d0();return e.jsx(a.div,{initial:{opacity:0,x:`${d*100}%`},animate:{opacity:1,x:0},exit:{opacity:0,x:`${d*-100}%`},transition:{duration:.2},className:"absolute flex justify-center w-full",children:e.jsx(L0,{character:t,width:304.83,height:493,checked:s,disabled:f&&!s||r,withCheck:!0,onCheck:c,highlightCheck:n})})},m0=t=>{const{className:f,opened:s,applied:r,withRules:c,onClose:n,onApply:d,...m}=t,y=Z(L=>L.availableCharacters),u=Z(L=>L.usedCharacters),g=W.filter(L=>y.includes(L.id)&&!u.includes(L.id)),[p,N]=h.useState(g[0]),[x,b]=h.useState(1),[l,T]=Q("cards-selector",c?1:5),[C,V]=h.useState(!1),[w,E]=h.useState([]),k=g.indexOf(p),I=k>0,S=k<g.length-1,z=()=>{I&&(b(-1),N(g[k-1]))},M=()=>{S&&(b(1),N(g[k+1]))},O=L=>{(l===2||l===4)&&T();const R=L?[...w,p]:w.filter(P=>P.id!==p.id);E(R)},_=()=>{V(!1),d==null||d(w)};if(h.useEffect(()=>{if(s&&(l===1||l===3)){const L=setTimeout(()=>T(),600);return()=>clearTimeout(L)}},[s,l]),!p)return null;const v=l===1||l===2||l===3||l===4;return e.jsx(o,{children:s&&e.jsxs(a.div,{initial:{opacity:0,y:"20%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"20%"},transition:{duration:.2,ease:"easeInOut"},className:`absolute top-0 left-0 w-full h-full overflow-auto z-30 p-[20px] ${f??""}`,...m,children:[e.jsx(o,{children:!v&&e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:"easeInOut"},className:`absolute top-[20px] left-[20px] w-[calc(100%-40px)] flex items-center justify-between transition-[filter] duration-200 ${C?"blur pointer-events-none":""}`,children:[e.jsxs("span",{className:"font-inter font-semibold text-[20px] leading-[100%] text-[#FFFFFF]",children:[w.length,"/",G]}),e.jsx(x0,{className:"ml-auto",onClick:n})]})}),e.jsx(o,{initial:!1,children:v&&e.jsx(a.div,{initial:{opacity:0,y:"20%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"-20%"},transition:{duration:.2,ease:"easeInOut"},className:`absolute top-[20px] left-0 w-full flex flex-col items-center transition-[filter] duration-200 ${C?"blur pointer-events-none":""}`,children:e.jsxs("div",{className:"relative w-[265px] h-[92px] flex flex-col items-center",children:[e.jsx("div",{className:"w-full h-full bg-[#FFFFFF] rounded-[7.41px] border-[1.48px] border-[#000000]",children:e.jsx(o,{initial:!1,children:e.jsx(a.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2,ease:"easeInOut"},className:"absolute top-0 left-0 w-full h-full p-[10px] flex items-center justify-center",children:e.jsx("p",{className:"font-gilroy font-light text-[16px] leading-[105%] tracking-[0.01em] text-center text-[#000000]",children:l===1||l===2?"Чтобы выбрать героя для сражения, отмечай его галочкой":"Если захочешь поменять героя, нажми на галочку еще раз"})},l===1||l===2?"12":"34")})}),e.jsx("svg",{className:"absolute left-[23px] bottom-[-3px] translate-y-full",width:"16",height:"38",viewBox:"0 0 16 38",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9 1C9 0.447715 8.55228 0 8 0C7.44772 0 7 0.447715 7 1H8H9ZM7.29289 37.7071C7.68342 38.0976 8.31658 38.0976 8.70711 37.7071L15.0711 31.3431C15.4616 30.9526 15.4616 30.3195 15.0711 29.9289C14.6805 29.5384 14.0474 29.5384 13.6569 29.9289L8 35.5858L2.34315 29.9289C1.95262 29.5384 1.31946 29.5384 0.928932 29.9289C0.538408 30.3195 0.538408 30.9526 0.928932 31.3431L7.29289 37.7071ZM8 1H7V37H8H9V1H8Z",fill:"white"})})]})})}),e.jsxs(a.div,{animate:{y:v?70:0},transition:{duration:.2,ease:"easeInOut"},className:`absolute top-[84px] left-[20px] w-[calc(100%-40px)] flex flex-col items-center transition-[filter] duration-200 ${C?"blur pointer-events-none":""}`,children:[e.jsxs(a.div,{className:"relative w-full h-[493px] flex items-center justify-center",children:[e.jsx(o,{children:I&&!v&&e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute left-[-8px] top-1/2 -translate-y-1/2 rotate-180 p-[8px] cursor-pointer z-20",onClick:z,children:e.jsxs("svg",{width:"41",height:"42",viewBox:"0 0 41 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("mask",{id:"path-1-outside-1_621_6663",maskUnits:"userSpaceOnUse",x:"-0.0341797",y:"0",width:"41",height:"42",fill:"black",children:[e.jsx("rect",{fill:"white",x:"-0.0341797",width:"41",height:"42"}),e.jsx("path",{d:"M20.0664 38.8008L14.5107 33.2461L23.1787 24.5781H2V16.7305H22.6836L14.5088 8.55566L20.0635 3L37.9639 20.8945L37.9619 20.8965L37.9658 20.9014L20.0664 38.8008Z"})]}),e.jsx("path",{d:"M20.0664 38.8008L14.5107 33.2461L23.1787 24.5781H2V16.7305H22.6836L14.5088 8.55566L20.0635 3L37.9639 20.8945L37.9619 20.8965L37.9658 20.9014L20.0664 38.8008Z",fill:"white"}),e.jsx("path",{d:"M20.0664 38.8008L18.6523 40.2151L20.0665 41.6291L21.4806 40.215L20.0664 38.8008ZM14.5107 33.2461L13.0965 31.8319L11.6822 33.2462L13.0967 34.6604L14.5107 33.2461ZM23.1787 24.5781L24.5929 25.9923L28.0071 22.5781H23.1787V24.5781ZM2 24.5781H0V26.5781H2V24.5781ZM2 16.7305V14.7305H0V16.7305H2ZM22.6836 16.7305V18.7305H27.512L24.0978 15.3163L22.6836 16.7305ZM14.5088 8.55566L13.0945 7.14157L11.6805 8.55579L13.0946 9.96988L14.5088 8.55566ZM20.0635 3L21.4775 1.58555L20.0631 0.17168L18.6491 1.58591L20.0635 3ZM37.9639 20.8945L39.3781 22.3087L40.7925 20.8943L39.3778 19.4801L37.9639 20.8945ZM37.9619 20.8965L36.5477 19.4823L35.2819 20.7481L36.4002 22.1459L37.9619 20.8965ZM37.9658 20.9014L39.38 22.3156L40.6458 21.0498L39.5276 19.652L37.9658 20.9014ZM20.0664 38.8008L21.4805 37.3864L15.9248 31.8318L14.5107 33.2461L13.0967 34.6604L18.6523 40.2151L20.0664 38.8008ZM14.5107 33.2461L15.925 34.6603L24.5929 25.9923L23.1787 24.5781L21.7645 23.1639L13.0965 31.8319L14.5107 33.2461ZM23.1787 24.5781V22.5781H2V24.5781V26.5781H23.1787V24.5781ZM2 24.5781H4V16.7305H2H0V24.5781H2ZM2 16.7305V18.7305H22.6836V16.7305V14.7305H2V16.7305ZM22.6836 16.7305L24.0978 15.3163L15.923 7.14145L14.5088 8.55566L13.0946 9.96988L21.2694 18.1447L22.6836 16.7305ZM14.5088 8.55566L15.9231 9.96975L21.4778 4.41409L20.0635 3L18.6491 1.58591L13.0945 7.14157L14.5088 8.55566ZM20.0635 3L18.6495 4.41445L36.5499 22.309L37.9639 20.8945L39.3778 19.4801L21.4775 1.58555L20.0635 3ZM37.9639 20.8945L36.5497 19.4803L36.5477 19.4823L37.9619 20.8965L39.3761 22.3107L39.3781 22.3087L37.9639 20.8945ZM37.9619 20.8965L36.4002 22.1459L36.4041 22.1508L37.9658 20.9014L39.5276 19.652L39.5237 19.6471L37.9619 20.8965ZM37.9658 20.9014L36.5516 19.4872L18.6522 37.3866L20.0664 38.8008L21.4806 40.215L39.38 22.3156L37.9658 20.9014Z",fill:"black",mask:"url(#path-1-outside-1_621_6663)"})]})})}),e.jsx("div",{className:"relative w-full h-full",children:e.jsx(o,{initial:!1,mode:"popLayout",custom:x,children:e.jsx(f0,{character:p,applied:r,highlightCheck:l===2||l===4,checked:w.includes(p),disabled:w.length>=G,onCheck:O},p.id)})}),e.jsx(o,{children:S&&!v&&e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute right-[-8px] top-1/2 -translate-y-1/2 p-[8px] cursor-pointer z-20",onClick:M,children:e.jsxs("svg",{width:"41",height:"42",viewBox:"0 0 41 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("mask",{id:"path-1-outside-1_621_6663",maskUnits:"userSpaceOnUse",x:"-0.0341797",y:"0",width:"41",height:"42",fill:"black",children:[e.jsx("rect",{fill:"white",x:"-0.0341797",width:"41",height:"42"}),e.jsx("path",{d:"M20.0664 38.8008L14.5107 33.2461L23.1787 24.5781H2V16.7305H22.6836L14.5088 8.55566L20.0635 3L37.9639 20.8945L37.9619 20.8965L37.9658 20.9014L20.0664 38.8008Z"})]}),e.jsx("path",{d:"M20.0664 38.8008L14.5107 33.2461L23.1787 24.5781H2V16.7305H22.6836L14.5088 8.55566L20.0635 3L37.9639 20.8945L37.9619 20.8965L37.9658 20.9014L20.0664 38.8008Z",fill:"white"}),e.jsx("path",{d:"M20.0664 38.8008L18.6523 40.2151L20.0665 41.6291L21.4806 40.215L20.0664 38.8008ZM14.5107 33.2461L13.0965 31.8319L11.6822 33.2462L13.0967 34.6604L14.5107 33.2461ZM23.1787 24.5781L24.5929 25.9923L28.0071 22.5781H23.1787V24.5781ZM2 24.5781H0V26.5781H2V24.5781ZM2 16.7305V14.7305H0V16.7305H2ZM22.6836 16.7305V18.7305H27.512L24.0978 15.3163L22.6836 16.7305ZM14.5088 8.55566L13.0945 7.14157L11.6805 8.55579L13.0946 9.96988L14.5088 8.55566ZM20.0635 3L21.4775 1.58555L20.0631 0.17168L18.6491 1.58591L20.0635 3ZM37.9639 20.8945L39.3781 22.3087L40.7925 20.8943L39.3778 19.4801L37.9639 20.8945ZM37.9619 20.8965L36.5477 19.4823L35.2819 20.7481L36.4002 22.1459L37.9619 20.8965ZM37.9658 20.9014L39.38 22.3156L40.6458 21.0498L39.5276 19.652L37.9658 20.9014ZM20.0664 38.8008L21.4805 37.3864L15.9248 31.8318L14.5107 33.2461L13.0967 34.6604L18.6523 40.2151L20.0664 38.8008ZM14.5107 33.2461L15.925 34.6603L24.5929 25.9923L23.1787 24.5781L21.7645 23.1639L13.0965 31.8319L14.5107 33.2461ZM23.1787 24.5781V22.5781H2V24.5781V26.5781H23.1787V24.5781ZM2 24.5781H4V16.7305H2H0V24.5781H2ZM2 16.7305V18.7305H22.6836V16.7305V14.7305H2V16.7305ZM22.6836 16.7305L24.0978 15.3163L15.923 7.14145L14.5088 8.55566L13.0946 9.96988L21.2694 18.1447L22.6836 16.7305ZM14.5088 8.55566L15.9231 9.96975L21.4778 4.41409L20.0635 3L18.6491 1.58591L13.0945 7.14157L14.5088 8.55566ZM20.0635 3L18.6495 4.41445L36.5499 22.309L37.9639 20.8945L39.3778 19.4801L21.4775 1.58555L20.0635 3ZM37.9639 20.8945L36.5497 19.4803L36.5477 19.4823L37.9619 20.8965L39.3761 22.3107L39.3781 22.3087L37.9639 20.8945ZM37.9619 20.8965L36.4002 22.1459L36.4041 22.1508L37.9658 20.9014L39.5276 19.652L39.5237 19.6471L37.9619 20.8965ZM37.9658 20.9014L36.5516 19.4872L18.6522 37.3866L20.0664 38.8008L21.4806 40.215L39.38 22.3156L37.9658 20.9014Z",fill:"black",mask:"url(#path-1-outside-1_621_6663)"})]})})})]}),e.jsx(o,{children:!r&&!v&&e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"mt-[20px] w-full flex justify-center",children:e.jsx(H,{disabled:w.length<G,onClick:()=>V(!0),children:"В бой!"})})})]}),e.jsx(o,{children:C&&e.jsx(a.img,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute top-0 left-0 w-full h-full z-30",src:J,alt:""})}),e.jsx(o,{children:C&&e.jsxs(a.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},className:"absolute top-[185px] left-[20px] w-[calc(100%-40px)] flex flex-col items-center z-30",children:[e.jsx("div",{className:"w-full bg-[#FFFFFF] rounded-[7.41px] border-[1.48px] border-[#000000] p-[20px]",children:e.jsx("p",{className:"font-gilroy font-light text-[16px] leading-[105%] tracking-[0.01em] text-[#000000]",children:"Ты уверен в в выборе героев? После нажатия этой кнопки ты не сможешь их поменять"})}),e.jsx(H,{className:"mt-[20px]",onClick:_,children:"Да, уверен"}),e.jsx(H,{className:"mt-[20px]",secondary:!0,onClick:()=>V(!1),children:"Нет, хочу поменять"})]})})]})})};function N0({level:t,onReset:f}){const[s,r]=Q(`level-${t.id}`,1),c=i0(),[n,d]=h.useState(!1),[m,y]=h.useState(!1),[u,g]=h.useState(!1),[p,N]=h.useState([]),[x,b]=h.useState(0),[l,T]=h.useState(null),C=Z(i=>i.remainingLives),V=Z(i=>i.availableCharacters),w=Z(i=>i.usedCharacters),E=Z(i=>i.passLevel),k=Z(i=>i.looseLevel),I=W.filter(i=>V.includes(i.id)&&!w.includes(i.id)),S=W.filter(i=>t.winNewCharacters.includes(i.id)),z=p0.find(i=>i.id===t.monster),M=l===!0?t.tasks.length:l===!1?0:1/0,O=async()=>{await c({to:".",replace:!0}),f==null||f()},_=()=>{c({to:"/path"})},v=()=>{s===4&&r()},L=i=>{N(i),y(!1),g(!0),r()},R=()=>{s!==7||x>M||b(i=>i+1)},P=()=>{C>0?O():c({to:"/full-loose"})},e0=async()=>{await c({to:`/level-${t.id}-win`}),E(t.id,p,S)};h.useEffect(()=>{(s===3||s===5||s===8)&&setTimeout(()=>r(),600)},[l,s,x]),h.useEffect(()=>{s===7&&x>M&&(l===!0?setTimeout(()=>r(),600):l===!1&&(k(1),setTimeout(()=>r(),1200)))},[l,s,x]),h.useEffect(()=>{u&&T(p.every(i=>t.correctCharacters.includes(i.id)))},[u,p]);const D=s===1||s===2||m,j=D||s===9,$=l?x>t.tasks.length?t.monsterImages.length-1:t.tasks[x-1]?t.tasks[x-1].monsterState-1:0:0;return z?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative h-full",onClick:v,children:[e.jsxs("div",{className:`absolute top-0 left-0 w-full h-full transition-[filter] duration-200 ${j?"blur pointer-events-none":""}`,children:[e.jsx("img",{className:"absolute",style:{top:`${t.bgTop1.y}px`,left:`${t.bgTop1.x}px`,width:`${t.bgTop1.width}px`,height:`${t.bgTop1.height}px`},src:t.bgTop1.image,alt:""}),e.jsx("img",{className:"absolute",style:{top:`${t.bgTop2.y}px`,left:`${t.bgTop2.x}px`,width:`${t.bgTop2.width}px`,height:`${t.bgTop2.height}px`},src:t.bgTop2.image,alt:""}),e.jsx("img",{className:"absolute top-[312px] left-[-72px] w-[497px] h-[439px]",src:n0,alt:""})]}),e.jsx(o,{initial:!1,children:!m&&e.jsx(a.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:`absolute top-[20px] left-[20px] flex items-center justify-center border-2 border-[#000000] rounded-[10px] bg-[#EA5616] w-[48px] h-[48px] transition-[filter] duration-200 ${j&&!D?"blur pointer-events-none":"z-20"}`,onClick:_,children:e.jsx("svg",{width:"29",height:"29",viewBox:"0 0 29 29",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M14.3994 28.8008L18.8691 24.332L11.8955 17.3584H28.9336V11.0459H12.2939L18.8711 4.46973L14.4023 0L0.00195312 14.3965L0.00292969 14.3975L0 14.4014L14.3994 28.8008Z",fill:"white"})})})}),e.jsx(o,{initial:!1,children:!m&&e.jsx(a.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:`absolute top-[20px] right-[20px] flex items-center justify-center border-2 border-[#000000] rounded-[10px] bg-[#EA5616] w-[48px] h-[48px] transition-[filter] duration-200 ${j&&!D?"blur pointer-events-none":"z-20"}`,onClick:()=>d(!0),children:e.jsx("svg",{width:"21",height:"33",viewBox:"0 0 21 33",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M7.09114 22.8442V22.4488C7.10128 20.6136 7.27365 19.1535 7.60824 18.0686C7.95298 16.9837 8.43966 16.1118 9.0683 15.4527C9.69693 14.7835 10.4624 14.1701 11.3648 13.6124C11.9833 13.2271 12.5359 12.8064 13.0226 12.3501C13.5194 11.8837 13.9098 11.3666 14.1937 10.7988C14.4776 10.2208 14.6195 9.577 14.6195 8.86725C14.6195 8.06625 14.432 7.37171 14.0568 6.78363C13.6817 6.19555 13.1747 5.73929 12.5359 5.41483C11.9073 5.09037 11.2026 4.92814 10.4219 4.92814C9.702 4.92814 9.0176 5.0853 8.36869 5.39962C7.72991 5.7038 7.1976 6.17021 6.77175 6.79884C6.35604 7.41734 6.12284 8.20313 6.07214 9.15622H0.657771C0.708467 7.22976 1.17487 5.61762 2.05699 4.31979C2.94925 3.02196 4.1254 2.04859 5.58546 1.39968C7.05565 0.750765 8.67793 0.426308 10.4523 0.426308C12.3889 0.426308 14.0923 0.765974 15.5625 1.44531C17.0428 2.12464 18.1936 3.09294 19.0149 4.35021C19.8463 5.59734 20.2621 7.07767 20.2621 8.79121C20.2621 9.94708 20.0745 10.9813 19.6993 11.8938C19.3343 12.8064 18.8121 13.6175 18.1328 14.3272C17.4535 15.037 16.6474 15.6707 15.7146 16.2284C14.8933 16.7353 14.219 17.2626 13.6918 17.8101C13.1747 18.3576 12.7894 19.0015 12.5359 19.7416C12.2926 20.4716 12.1658 21.374 12.1557 22.4488V22.8442H7.09114ZM9.73749 32.3346C8.82495 32.3346 8.03916 32.0101 7.38011 31.3612C6.72106 30.7123 6.39153 29.9214 6.39153 28.9886C6.39153 28.0761 6.72106 27.2954 7.38011 26.6465C8.03916 25.9976 8.82495 25.6731 9.73749 25.6731C10.6399 25.6731 11.4206 25.9976 12.0797 26.6465C12.7489 27.2954 13.0834 28.0761 13.0834 28.9886C13.0834 29.6071 12.9263 30.1699 12.612 30.6768C12.3078 31.1838 11.9022 31.5894 11.3953 31.8935C10.8984 32.1876 10.3458 32.3346 9.73749 32.3346Z",fill:"white"})})})}),e.jsx(s0,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`absolute top-[20px] left-1/2 -translate-x-1/2 transition-[filter] duration-200 ${j?"blur pointer-events-none":"z-20"}`,remainingLives:C}),e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full z-0",children:[e.jsx(o,{initial:!1,children:e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`absolute transition-[filter] duration-200 ${s===7?"cursor-pointer":""} ${j?"blur pointer-events-none":""}`,style:{width:`${t.monsterImages[$].width}px`,height:`${t.monsterImages[$].height}px`,top:`${t.monsterImages[$].y}px`,left:`${t.monsterImages[$].x}px`},onClick:R,children:e.jsx(a.img,{className:"w-full h-full",src:t.monsterImages[$].image,alt:""})},t.monsterImages[$].image)}),e.jsx(o,{initial:!1,children:p.map(i=>{const F=t.characterPairs[p[0].id][p[1].id].indexOf(i.id),A=l===!1&&x>M?i.looseImage:i.image,B=l===!1&&x>M?t.looseCharacterImages:t.characterImages;return e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`absolute transition-[filter] duration-200 pointer-events-none ${j?"blur":""}`,style:{top:`${B[i.id][F].y}px`,left:`${B[i.id][F].x}px`,width:`${B[i.id][F].width}px`,height:`${B[i.id][F].height}px`,zIndex:F+1},children:e.jsx("img",{className:"w-full h-full",src:A,alt:""})},A)})})]}),e.jsxs(o,{children:[t.tasks.map((i,F)=>l===!0&&x===F+1&&e.jsxs(a.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute z-0 flex items-start justify-center pointer-events-none",style:{width:`${i.width}px`,height:`${i.height}px`,top:`${i.y}px`,left:`${i.x}px`,padding:i.padding.map(A=>`${A}px`).join(" ")},children:[e.jsx("img",{className:"absolute left-0 top-0 w-full h-full origin-center",style:{transform:`rotate(${i.rotate}deg)`},src:i.image,alt:""}),e.jsx("p",{className:"absolute font-inter font-semibold text-[12px] leading-[100%] text-center lowercase text-[#00029D]",style:{width:`calc(100% - ${i.padding[1]+i.padding[3]}px)`,height:`calc(100% - ${i.padding[0]+i.padding[2]}px)`},children:i.text})]},F)),l===!1&&(s===7||s===8)&&x>M&&e.jsxs(a.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,transition:{duration:.2,ease:"easeInOut"}},className:"absolute z-0 flex items-start justify-center pointer-events-none",style:{top:`${t.looseMonsterText.y}px`,left:`${t.looseMonsterText.x}px`},children:[e.jsxs("svg",{style:{width:`${t.looseMonsterText.width}px`,height:`${t.looseMonsterText.height}px`},viewBox:"0 0 161 117",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M80.6709 1C95.8742 1 108.653 11.3778 112.312 25.4355C116.731 23.2064 121.726 21.9493 127.014 21.9492C145.07 21.9492 159.708 36.5873 159.708 54.6436C159.708 72.6997 145.07 87.3369 127.014 87.3369C126.111 87.3369 125.217 87.2984 124.333 87.2266L131.141 114L105.823 97.7432C99.8269 104.96 90.7871 109.557 80.6709 109.557C68.4838 109.556 57.8549 102.887 52.2324 93C46.9638 96.6338 40.5777 98.7637 33.6934 98.7637C15.6373 98.7634 1.00005 84.1264 1 66.0703C1 50.9559 11.2568 38.2384 25.1895 34.4951C25.1462 34.0222 25.123 33.5428 25.123 33.0586C25.1233 24.469 32.0871 17.506 40.6768 17.5059C44.4137 17.5059 47.8425 18.8241 50.5244 21.0205C55.475 9.25835 67.1087 1.0002 80.6709 1Z",fill:"white"}),e.jsx("path",{d:"M80.6709 1V0H80.6709L80.6709 1ZM112.312 25.4355L111.344 25.6874L111.656 26.8863L112.762 26.3284L112.312 25.4355ZM127.014 21.9492V20.9492H127.014L127.014 21.9492ZM159.708 54.6436L160.708 54.6436V54.6436H159.708ZM127.014 87.3369L127.014 88.3369H127.014V87.3369ZM124.333 87.2266L124.414 86.2299L123.019 86.1165L123.364 87.473L124.333 87.2266ZM131.141 114L130.6 114.841L132.735 116.212L132.11 113.754L131.141 114ZM105.823 97.7432L106.364 96.9017L105.619 96.4238L105.054 97.1041L105.823 97.7432ZM80.6709 109.557L80.6709 110.557H80.6709V109.557ZM52.2324 93L53.1017 92.5057L52.5625 91.5575L51.6647 92.1768L52.2324 93ZM33.6934 98.7637L33.6933 99.7637H33.6934V98.7637ZM1 66.0703H0H1ZM25.1895 34.4951L25.4489 35.4609L26.2621 35.2424L26.1853 34.4039L25.1895 34.4951ZM25.123 33.0586L24.123 33.0586V33.0586H25.123ZM40.6768 17.5059V16.5059H40.6767L40.6768 17.5059ZM50.5244 21.0205L49.8908 21.7942L50.9267 22.6425L51.4461 21.4084L50.5244 21.0205ZM80.6709 1V2C95.4077 2 107.797 12.0593 111.344 25.6874L112.312 25.4355L113.279 25.1837C109.509 10.6962 96.3407 0 80.6709 0V1ZM112.312 25.4355L112.762 26.3284C117.045 24.168 121.886 22.9493 127.014 22.9492L127.014 21.9492L127.014 20.9492C121.565 20.9493 116.417 22.2448 111.861 24.5427L112.312 25.4355ZM127.014 21.9492V22.9492C144.518 22.9492 158.708 37.1395 158.708 54.6436H159.708H160.708C160.708 36.035 145.622 20.9492 127.014 20.9492V21.9492ZM159.708 54.6436L158.708 54.6435C158.708 72.1474 144.518 86.3369 127.014 86.3369V87.3369V88.3369C145.622 88.3369 160.708 73.252 160.708 54.6436L159.708 54.6436ZM127.014 87.3369L127.014 86.3369C126.139 86.3369 125.273 86.2996 124.414 86.2299L124.333 87.2266L124.252 88.2233C125.162 88.2972 126.083 88.3369 127.014 88.3369L127.014 87.3369ZM124.333 87.2266L123.364 87.473L130.171 114.246L131.141 114L132.11 113.754L125.302 86.9801L124.333 87.2266ZM131.141 114L131.681 113.159L106.364 96.9017L105.823 97.7432L105.283 98.5846L130.6 114.841L131.141 114ZM105.823 97.7432L105.054 97.1041C99.2394 104.102 90.477 108.557 80.6709 108.557V109.557V110.557C91.0971 110.557 100.414 105.817 106.592 98.3823L105.823 97.7432ZM80.6709 109.557L80.6709 108.557C68.8579 108.556 58.5538 102.093 53.1017 92.5057L52.2324 93L51.3631 93.4943C57.1561 103.681 68.1096 110.556 80.6709 110.557L80.6709 109.557ZM52.2324 93L51.6647 92.1768C46.5575 95.6993 40.3682 97.7637 33.6934 97.7637V98.7637V99.7637C40.7871 99.7637 47.3702 97.5683 52.8002 93.8232L52.2324 93ZM33.6934 98.7637L33.6934 97.7637C16.1896 97.7634 2.00005 83.5741 2 66.0703H1H0C4.88758e-05 84.6787 15.085 99.7634 33.6933 99.7637L33.6934 98.7637ZM1 66.0703H2C2 51.4197 11.942 39.0898 25.4489 35.4609L25.1895 34.4951L24.93 33.5294C10.5716 37.3871 0 50.4921 0 66.0703H1ZM25.1895 34.4951L26.1853 34.4039C26.1446 33.9599 26.123 33.511 26.123 33.0586H25.123H24.123C24.123 33.5746 24.1477 34.0845 24.1936 34.5863L25.1895 34.4951ZM25.123 33.0586L26.123 33.0586C26.1232 25.0213 32.6393 18.506 40.6768 18.5059L40.6768 17.5059L40.6767 16.5059C31.5349 16.506 24.1233 23.9166 24.123 33.0586L25.123 33.0586ZM40.6768 17.5059V18.5059C44.1742 18.5059 47.381 19.7387 49.8908 21.7942L50.5244 21.0205L51.158 20.2468C48.3041 17.9096 44.6531 16.5059 40.6768 16.5059V17.5059ZM50.5244 21.0205L51.4461 21.4084C56.2461 10.0041 67.5251 2.00019 80.6709 2L80.6709 1L80.6709 0C66.6923 0.00020653 54.7039 8.51261 49.6027 20.6326L50.5244 21.0205Z",fill:"black"})]}),e.jsx("p",{className:"absolute font-inter font-semibold text-[12px] leading-[100%] text-center lowercase text-[#00029D]",style:{padding:t.looseMonsterText.padding.map(i=>`${i}px`).join(" ")},children:t.looseMonsterText.text})]})]}),e.jsx(a0,{initial:{opacity:0},animate:{opacity:1,y:u?97:-18},exit:{opacity:0},className:`absolute bottom-0 left-0 transition-[filter] duration-200 ${j?"blur pointer-events-none":""}`,cards:I,selectedCards:p,applied:u,disabled:s<6,onClick:()=>y(!0)}),e.jsx(o,{children:j&&e.jsx(a.img,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`absolute top-0 left-0 w-full h-full ${m?"z-20":""}`,src:l===!1&&s===9?o0:J,alt:""})}),e.jsx(o,{children:s===1&&e.jsx(a.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute top-0 left-0 w-full h-full",children:e.jsxs("div",{className:"absolute top-1/2 -translate-y-1/2 left-[20px] w-[calc(100%-40px)] flex flex-col items-center",children:[e.jsx(a.div,{className:"relative bg-[#FFFFFF] border-2 border-[#000000] rounded-[7.41px] pt-[21px] pr-[22px] pb-[22px] pl-[22px] w-full z-10",children:e.jsx("p",{className:"font-gilroy font-light text-[16px] leading-[105%] tracking-[0.01em] text-[#000000]",children:t.introText})}),e.jsx(H,{className:"mt-[20px]",onClick:r,children:"Далее"})]})})}),e.jsx(o,{children:s===2&&e.jsxs(a.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex flex-col items-center absolute top-[87px] left-[20px] w-[calc(100%-40px)]",children:[e.jsx(h0,{height:493,width:304.83,monster:z}),e.jsx(H,{className:"mt-[20px]",onClick:r,children:"Далее"})]})}),e.jsx(o,{children:s===4&&e.jsx(a.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex flex-col items-center absolute top-[208px] left-[20px] w-[calc(100%-40px)]",children:e.jsxs(a.div,{className:"relative bg-[#FFFFFF] border-2 border-[#000000] rounded-[7.41px] p-[20px] w-full z-10",children:[e.jsx("h3",{className:"font-gilroy font-extrabold text-[20px] leading-[100%] text-[#EA5616] text-center",children:"Подсказка"}),e.jsx("p",{className:"mt-[20px] font-gilroy font-light text-[16px] leading-[105%] tracking-[0.01em] text-[#000000]",children:t.hintText})]})})}),e.jsx(o,{children:s===6&&e.jsxs(a.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`flex flex-col items-center absolute top-[259px] w-full transition-[filter] duration-200 ${j?"blur pointer-events-none":""}`,children:[e.jsx(a.div,{className:"relative bg-[#FFFFFF] border-2 border-[#000000] rounded-[7.41px] p-[20px] w-[265px] z-10",children:e.jsx("p",{className:"font-gilroy font-light text-[16px] leading-[105%] tracking-[0.01em] text-[#000000] text-center",children:"Выбери 2 карты с персонажами, которые помогут победить монстра и устроить праздник"})}),e.jsx("svg",{className:"absolute bottom-[-3px] translate-y-full pointer-events-none",width:"16",height:"83",viewBox:"0 0 16 83",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9.49998 1.00617C9.50339 0.453898 9.05845 0.00342817 8.50617 1.90735e-05C7.9539 -0.00339003 7.50343 0.441553 7.50002 0.993827L8.5 1L9.49998 1.00617ZM7.28854 82.7027C7.67665 83.0957 8.3098 83.0996 8.70273 82.7115L15.1059 76.3869C15.4988 75.9988 15.5027 75.3656 15.1146 74.9727C14.7265 74.5798 14.0933 74.5759 13.7004 74.964L8.00873 80.5858L2.3869 74.8941C1.9988 74.5012 1.36564 74.4973 0.972715 74.8854C0.579787 75.2735 0.575879 75.9067 0.963985 76.2996L7.28854 82.7027ZM8.5 1L7.50002 0.993827L7.00002 81.9938L8 82L8.99998 82.0062L9.49998 1.00617L8.5 1Z",fill:"white"})})]})}),e.jsx(o,{children:s===7&&x===0&&e.jsxs(a.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`flex flex-col items-center absolute top-[376px] w-full transition-[filter] duration-200 ${j?"blur pointer-events-none":""}`,children:[e.jsx(a.div,{className:"relative bg-[#FFFFFF] border-2 border-[#000000] rounded-[7.41px] py-[21px] px-[30px] w-[265px] z-10",children:e.jsx("p",{className:"font-gilroy font-light text-[16px] leading-[105%] tracking-[0.01em] text-[#000000] text-center",children:"Нажимай на монстра, чтобы атаковать"})}),e.jsx("svg",{className:"absolute top-[-2px] left-[252px] -translate-y-full pointer-events-none",width:"16",height:"83",viewBox:"0 0 16 83",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9.49998 81.9938C9.50339 82.5461 9.05845 82.9966 8.50617 83C7.9539 83.0034 7.50343 82.5584 7.50002 82.0062L8.5 82L9.49998 81.9938ZM7.28854 0.297275C7.67665 -0.0956544 8.3098 -0.0995628 8.70273 0.288545L15.1059 6.6131C15.4988 7.00121 15.5027 7.63436 15.1146 8.02729C14.7265 8.42022 14.0933 8.42413 13.7004 8.03602L8.00873 2.41419L2.3869 8.10585C1.9988 8.49878 1.36564 8.50269 0.972715 8.11458C0.579787 7.72648 0.575879 7.09333 0.963985 6.7004L7.28854 0.297275ZM8.5 82L7.50002 82.0062L7.00002 1.00618L8 1L8.99998 0.993831L9.49998 81.9938L8.5 82Z",fill:"white"})})]})}),e.jsx(o,{children:l===!0&&s===9&&e.jsxs(a.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex flex-col items-center absolute top-[177px] left-[20px] w-[calc(100%-40px)]",children:[e.jsxs(a.div,{className:"relative bg-[#FFFFFF] border-2 border-[#000000] rounded-[7.41px] pt-[20px] pr-[18px] pb-[23px] pl-[21px] w-full z-10",children:[e.jsx("h3",{className:"font-gilroy font-extrabold text-[20px] leading-[108%] tracking-[0] text-[#EA5616] text-center",children:t.winTitle}),e.jsx("p",{className:"mt-[20px] font-gilroy font-light text-[16px] leading-[105%] tracking-[0.01em] text-[#000000]",children:t.winText})]}),e.jsx(H,{className:"mt-[20px]",onClick:e0,children:"Далее"})]})}),e.jsx(o,{children:l===!1&&s===9&&e.jsxs(a.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex flex-col items-center absolute top-[177px] left-[20px] w-[calc(100%-40px)]",children:[e.jsxs(a.div,{className:"relative bg-[#FFFFFF] border-2 border-[#000000] rounded-[7.41px] pt-[20px] pr-[18px] pb-[23px] pl-[21px] w-full z-10",children:[e.jsx("h3",{className:"font-gilroy font-extrabold text-[20px] leading-[108%] tracking-[0] text-[#EA5616] text-center",children:t.looseTitle}),e.jsx("p",{className:"mt-[20px] font-gilroy font-light text-[16px] leading-[105%] tracking-[0.01em] text-[#000000]",children:t.looseText})]}),e.jsx(H,{className:"mt-[20px]",onClick:P,children:"Попробовать снова"})]})}),e.jsx(m0,{withRules:r0[0].id===t.id&&!u,opened:m,applied:u,onClose:()=>y(!1),onApply:L})]}),e.jsx(o,{children:n&&e.jsx(l0,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"},className:"!absolute top-0 left-0 w-full h-full z-50 bg-[#FFFFFF]",onPlay:()=>d(!1)})})]}):null}export{N0 as L};
